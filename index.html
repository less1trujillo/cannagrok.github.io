<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="CANNAGROK & GROW: AI legal cannabis. THCA <0.3%. Free chat, tracker, PWA. Powered by Grok & xAI.">
  <meta name="theme-color" content="#2e7d32">
  <meta property="og:title" content="CANNAGROK & GROW - AI Legal Cannabis">
  <meta property="og:description" content="Free AI chat + GROW tracker. THCA <0.3% nationwide. Install as app.">
  <meta property="og:image" content="https://i.imgur.com/cannagrok-logo.png">
  <title>CANNAGROK & GROW | AI Legal Cannabis</title>
  <link rel="manifest" href="data:application/manifest+json,{
    'name': 'CANNAGROK',
    'short_name': 'CANNAGROK',
    'start_url': '.',
    'display': 'standalone',
    'background_color': '#e8f5e9',
    'theme_color': '#2e7d32',
    'icons': [{'src': 'https://i.imgur.com/cannagrok-icon.png','sizes': '192x192','type': 'image/png'}]
  }">
  <link rel="icon" href="https://i.imgur.com/cannagrok-icon.png">
  <style>
    :root { --bg: #e8f5e9; --card: #ffffff; --text: #1b5e20; --accent: #2e7d32; --premium: #ff9800; }
    [data-theme="dark"] { --bg: #1a3d1a; --card: #2d5a2d; --text: #c8e6c9; --accent: #4caf50; --premium: #ffb74d; }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; padding: 20px; transition: all 0.3s; }
    .container { max-width: 600px; margin: 0 auto; }
    header { text-align: center; padding: 20px 0; }
    h1 { font-size: 3rem; color: var(--accent); animation: fadeIn 1s; }
    .subtitle { font-weight: 700; font-size: 1.5rem; color: var(--accent); }
    .legal { font-size: 0.8rem; opacity: 0.8; margin: 10px 0; }
    .card { background: var(--card); border-radius: 20px; padding: 20px; margin: 15px 0; box-shadow: 0 8px 25px rgba(0,0,0,0.1); transition: transform 0.2s; }
    .card:hover { transform: translateY(-5px); }
    .chat { position: relative; }
    #messages { height: 320px; overflow-y: auto; padding: 15px; background: #f5f5f5; border-radius: 15px; margin-bottom: 10px; }
    [data-theme="dark"] #messages { background: #1e3a1e; }
    .msg { padding: 12px 18px; border-radius: 20px; margin: 8px 0; max-width: 85%; display: inline-block; animation: slideIn 0.3s; }
    .user { background: var(--accent); color: white; margin-left: auto; border-bottom-right-radius: 5px; }
    .grok { background: #e0e0e0; color: #000; border-bottom-left-radius: 5px; }
    [data-theme="dark"] .grok { background: #3a5f3a; color: #c8e6c9; }
    .input-bar { display: flex; gap: 10px; }
    input { flex: 1; padding: 14px; border: 2px solid #ddd; border-radius: 25px; font-size: 1rem; }
    button { background: var(--accent); color: white; border: none; padding: 14px 20px; border-radius: 25px; font-weight: bold; cursor: pointer; transition: 0.2s; }
    button:hover { background: #1b5e20; transform: scale(1.05); }
    .premium { background: linear-gradient(135deg, var(--premium), #ff8a65); color: white; text-align: center; }
    .premium a { color: white; text-decoration: none; font-weight: bold; }
    .toggle { position: fixed; top: 20px; right: 20px; background: var(--accent); color: white; border: none; padding: 10px; border-radius: 50%; cursor: pointer; z-index: 1000; }
    .pwa-install { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: var(--accent); color: white; padding: 15px 25px; border-radius: 30px; display: none; z-index: 1000; }
    footer { text-align: center; font-size: 0.8rem; margin-top: 30px; opacity: 0.7; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideIn { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    @media (max-width: 600px) { h1 { font-size: 2.2rem; } }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <button class="toggle" onclick="toggleTheme()">ðŸŒ™</button>
  <div class="container">
    <header>
      <h1>ðŸŒ¿ CANNAGROK</h1>
      <p class="subtitle">CANNA â†’ GROK â†’ GROW</p>
      <p>AI for Legal Cannabis. Free. 21+. THCA <0.3% Nationwide.</p>
      <p class="legal">Powered by Grok & xAI. Educational only. Not medical advice.</p>
    </header>

    <div class="card">
      <h2>ðŸ”¥ Top THCA Strains 2025</h2>
      <p><strong>Blue Dream</strong> (19.8%): Balanced hybrid. <a href="https://dutchie.com?aff=cannagrok" target="_blank">Buy</a></p>
      <p><strong>Jealousy</strong> (21%): Euphoric lift. <a href="https://weedmaps.com?aff=cannagrok" target="_blank">Buy</a></p>
      <p><strong>White Runtz</strong> (31.55%): Creamy euphoria. <a href="https://dutchie.com?aff=cannagrok" target="_blank">Buy</a></p>
    </div>

    <div class="card chat">
      <h2>ðŸ’¬ Chat with Grok</h2>
      <div id="messages"></div>
      <div class="input-bar">
        <input type="text" id="input" placeholder="Ask about THCA, strains, laws..." />
        <button onclick="send()">Send</button>
      </div>
    </div>

    <div class="card premium">
      <h2>ðŸš€ PREMIUM $4.99/mo</h2>
      <p>Full GROW Dashboard: Track strain, dose, dryness %, THC intake, weekly PDF reports, voice with Grok.</p>
      <a href="https://paypal.me/cannagrok/4.99" target="_blank">Unlock Now</a>
    </div>

    <div class="card">
      <h2>ðŸ“± Install as App</h2>
      <p>Add to home screen for offline access.</p>
      <button id="installBtn" style="display:none;background:var(--accent);color:white;padding:12px 20px;border-radius:25px;border:none;cursor:pointer;">Install CANNAGROK</button>
    </div>

    <footer>
      <p>Legal in all 50 states via THCA <0.3% (Farm Bill). Â© 2025 CANNAGROK.</p>
    </footer>
  </div>

  <script>
    // Dark Mode
    function toggleTheme() {
      document.body.dataset.theme = document.body.dataset.theme === "dark" ? "" : "dark";
      localStorage.setItem("theme", document.body.dataset.theme);
    }
    if (localStorage.getItem("theme") === "dark") document.body.dataset.theme = "dark";

    // Chat
    const msgDiv = document.getElementById('messages');
    const input = document.getElementById('input');
    function addMsg(text, isUser = false) {
      const div = document.createElement('div');
      div.className = `msg ${isUser ? 'user' : 'grok'}`;
      div.innerHTML = text.replace(/\n/g, '<br>');
      msgDiv.appendChild(div);
      msgDiv.scrollTop = msgDiv.scrollHeight;
    }
    function grokReply(q) {
      q = q.toLowerCase();
      if (q.includes('thca') || q.includes('strain')) {
        return `THCA Legal Nationwide.<br><strong>Blue Dream</strong> (19.8%) - Balanced, creative.<br><a href="https://dutchie.com?aff=cannagrok" target="_blank">Buy Now</a><br><br>Premium: Full tracker â†’ $4.99`;
      }
      return `Ask about THCA, laws, or GROW plans.<br><br><a href="https://paypal.me/cannagrok/4.99" target="_blank">Premium $4.99</a>`;
    }
    function send() {
      const text = input.value.trim();
      if (!text) return;
      addMsg(text, true);
      input.value = '';
      addMsg('Grok thinking...', false);
      setTimeout(() => {
        msgDiv.lastChild.remove();
        addMsg(grokReply(text), false);
      }, 800);
    }
    input.addEventListener('keypress', e => { if (e.key === 'Enter') send(); });
    addMsg('Welcome! Ask about legal THCA or GROW plans.', false);

    // PWA Install
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', e => {
      e.preventDefault();
      deferredPrompt = e;
      document.getElementById('installBtn').style.display = 'block';
    });
    document.getElementById('installBtn').addEventListener('click', () => {
      deferredPrompt.prompt();
      deferredPrompt.userChoice.then(choice => {
        if (choice.outcome === 'accepted') {
          document.getElementById('installBtn').style.display = 'none';
        }
      });
    });
  </script>
</body>
</html>
