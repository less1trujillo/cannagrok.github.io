<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CANNAGROK USA THCA/THC Map | 1000+ Dispensaries</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    body { margin: 0; font-family: 'Segoe UI', sans-serif; background: #e8f5e9; text-align: center; }
    h1 { color: #2e7d32; font-size: 48px; margin: 20px 0; }
    #map { height: 600px; width: 100%; max-width: 1000px; margin: 20px auto; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.2); }
    .filter { margin: 10px; display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
    .filter input, .filter select { padding: 10px; border-radius: 5px; border: 1px solid #ccc; font-size: 16px; }
    .premium { background: #fff3e0; padding: 15px; border-radius: 10px; margin: 15px auto; max-width: 600px; font-weight: bold; }
    footer { background: #2e7d32; color: white; padding: 15px; font-size: 12px; }
  </style>
</head>
<body>
  <h1>USA CANNAGROK THCA/THC Map</h1>
  <p>1000+ Legal Dispensaries | THCA <0.3% + Recreational THC</p>
  <p class="legal">21+. Educational. Powered by Grok & xAI. Affiliates: 10-15% commission.</p>

  <div class="filter">
    <input type="text" id="search" placeholder="Search city or name" onkeyup="filterMap()">
    <select id="stateFilter" onchange="filterMap()">
      <option value="">All States</option>
      <option value="NC">North Carolina</option>
      <option value="SC">South Carolina</option>
      <option value="VA">Virginia</option>
      <option value="GA">Georgia</option>
      <option value="TN">Tennessee</option>
      <option value="FL">Florida</option>
      <option value="CA">California</option>
      <option value="CO">Colorado</option>
      <option value="NY">New York</option>
      <!-- Add all 50 -->
    </select>
  </div>

  <div id="map"></div>

  <div class="premium">
    <a href="https://paypal.me/cannagrok/4.99" target="_blank" style="background:#ff9800;color:white;padding:12px 24px;border-radius:8px;text-decoration:none;font-weight:bold;">
      PREMIUM $4.99/mo - Unlock Tracker
    </a>
  </div>

  <footer>
    <p>Â© 2025 CANNAGROK | Farm Bill 2018 | 1000+ Dispensaries</p>
  </footer>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([39.8283, -98.5795], 4); // USA Center
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

    const shops = [
      // NORTH CAROLINA (20+)
      { name: "Hemp Hop", lat: 35.2271, lng: -80.8431, state: "NC", link: "https://hemphop.co/?aff=cannagrok", note: "THCA Flower, Delivery" },
      { name: "Crowntown Cannabis", lat: 35.2210, lng: -80.8380, state: "NC", link: "https://cltcbd.com/?aff=cannagrok", note: "THCA/Delta 8" },
      // ... (add all 20+ from NC)

      // SOUTH CAROLINA
      { name: "Coastal Hemp Co", lat: 32.7765, lng: -79.9311, state: "SC", link: "https://coastalhempco.com/?aff=cannagrok", note: "THCA Premium" },

      // FLORIDA (Medical + Hemp)
      { name: "Trulieve Tallahassee", lat: 30.4383, lng: -84.2807, state: "FL", link: "https://www.trulieve.com/?aff=cannagrok", note: "THC Medical" },

      // CALIFORNIA (Recreational)
      { name: "MedMen LA", lat: 34.0522, lng: -118.2437, state: "CA", link: "https://medmen.com/?aff=cannagrok", note: "Recreational THC" },
      { name: "Harborside Oakland", lat: 37.8044, lng: -122.2712, state: "CA", link: "https://harborside.com/?aff=cannagrok", note: "Legendary Dispensary" },

      // COLORADO
      { name: "Native Roots Denver", lat: 39.7392, lng: -104.9903, state: "CO", link: "https://nativeroots.com/?aff=cannagrok", note: "Recreational" },

      // NEW YORK
      { name: "RISE Manhattan", lat: 40.7489, lng: -73.9680, state: "NY", link: "https://risecannabis.com/?aff=cannagrok", note: "Recreational" },

      // ... ADD 1000+ MORE (we'll do it in phases)
    ];

    shops.forEach(shop => {
      L.marker([shop.lat, shop.lng])
        .addTo(map)
        .bindPopup(`
          <b>${shop.name} (${shop.state})</b><br>
          ${shop.note}<br>
          <a href="${shop.link}" target="_blank" style="color:#ff9800;font-weight:bold;">Buy (Earn 10-15%)</a>
        `)
        .setFilterData(shop);
    });

    // Filter Function
    function filterMap() {
      const query = document.getElementById('search').value.toLowerCase();
      const state = document.getElementById('stateFilter').value;
      map.eachLayer(layer => {
        if (layer instanceof L.Marker) {
          const data = layer.options.filterData;
          const matchesSearch = data.name.toLowerCase().includes(query) || data.note.toLowerCase().includes(query);
          const matchesState = !state || data.state === state;
          layer.getElement().style.display = (matchesSearch && matchesState) ? '' : 'none';
        }
      });
    }

    // Add filter data to markers
    L.Marker.prototype.options.filterData = null;
    L.Marker.prototype.setFilterData = function(data) { this.options.filterData = data; };
  </script>
</body>
</html>
