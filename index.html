<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>CANNAGROK AI Assistant (FlowerForm)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* 1. Base Styles and Professional Look */
    body { 
      font-family: 'Inter', sans-serif; 
      background: #f0f4f8; /* Light professional background */
      margin: 0; 
      display: flex;
      justify-content: center;
      min-height: 100vh;
    }
    .chat-container { 
      max-width: 650px; 
      width: 95%;
      background: white; 
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); /* Subtle shadow */
      border-radius: 16px; 
      margin: 20px auto;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    header {
      background: #1B5E20; /* Dark, elegant green */
      color: white;
      padding: 15px;
      text-align: center;
    }
    header h1 { margin: 0; font-size: 1.8em; font-weight: 700; }
    header p { margin: 4px 0 0; font-size: 0.85em; opacity: 0.8; }

    /* 2. Chat Window and Message Bubbles */
    #messages { 
      flex-grow: 1; 
      padding: 20px; 
      overflow-y: auto;
      height: 60vh; 
      background: #ffffff;
      line-height: 1.4;
    }
    .msg { 
      padding: 10px 15px; 
      border-radius: 20px; 
      margin: 10px 0; 
      max-width: 85%; 
      word-wrap: break-word;
      display: block; 
    }
    .user { 
      background: #388E3C; /* User green */
      color: white; 
      margin-left: auto; 
      border-bottom-right-radius: 5px;
      text-align: right;
    }
    .grok { 
      background: #eceff1; /* Light grey for Grok */
      color: #212121; 
      border-left: 3px solid #4CAF50; /* Green bar for AI distinction */
      border-bottom-left-radius: 5px;
      text-align: left;
    }
    
    /* 3. Input and Button Area */
    .input-area {
        display: flex;
        padding: 15px 20px;
        border-top: 1px solid #eee;
        background: #f9f9f9;
        gap: 10px;
    }
    #input { 
      flex-grow: 1; 
      padding: 12px; 
      border: 1px solid #ccc; 
      border-radius: 24px;
      font-size: 15px;
    }
    button { 
      background: #388E3C;
      color: white; 
      border: none; 
      padding: 12px 18px; 
      border-radius: 24px; 
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover { background: #1B5E20; }
    
    /* 4. Footer and Premium Link */
    .footer-links {
        padding: 10px 20px;
        text-align: center;
        font-size: 0.9em;
        background: #e0e0e0;
    }
    .footer-links a {
        color: #FFC107; /* Amber/Gold for Premium */
        text-decoration: none;
        font-weight: 700;
    }
    .grok a {
        color: #1B5E20;
        text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="chat-container">
    <header>
      <h1>CANNAGROK üåø</h1>
      <p>AI + Data for FlowerForm. 21+ in legal jurisdictions only.</p>
    </header>

    <div id="messages"></div>
    
    <div class="input-area">
      <input type="text" id="input" placeholder="Ask about FlowerForm, dosage, or legality..." />
      <button onclick="send()">Send</button>
    </div>
    
    <div class="footer-links">
      <a href="https://paypal.me/cannagrok/4.99" target="_blank">‚≠ê PREMIUM $4.99/mo | Unlock Advanced Tools</a>
    </div>
  </div>
 <script>
    // --- MONETIZATION LINKS (UPDATE THESE WITH YOUR ACTUAL LINKS) ---
    const PAYPAL_LINK = "YOUR_PAYPAL_LINK_HERE"; // A. Example: https://paypal.me/cannagrok/4.99
    const PREMIUM_SALES_PAGE = "YOUR_CARRD_PREMIUM_SALES_LINK_HERE"; // B. Carrd page where you explain the value
    const AFFILIATE_HUB_LINK = "YOUR_CARRD_AFFILIATE_HUB_LINK_HERE"; // C. Carrd page with affiliate buttons
    const GITHUB_RAW_CSV = "YOUR_GITHUB_RAW_CSV_LINK_HERE"; // D. The direct RAW link to terpenome_map.csv

    const messages = document.getElementById('messages');
    // 
  
    
    // ** THE CORE LOGIC: ADVANCED FREEMIUM FUNNEL **
    let userState = {}; 

    function addMsg(text, sender) {
      const div = document.createElement('div');
      div.className = 'msg ' + (sender ? 'user' : 'grok');
      // Use <a> tag for links and <br> for new lines
      div.innerHTML = text.replace(/\n/g, '<br>'); 
      messages.appendChild(div);
      messages.scrollTop = messages.scrollHeight;
    }

  function grokResponse(msg, userState) {
        msg = msg.toLowerCase();
        
        // 1. **TERPENOME MAP PROMOTION (FREE EDUCATIONAL ASSET)**
        if (msg.includes('terpene') || msg.includes('aroma') || msg.includes('smell') || msg.includes('science')) {
            return `Understanding **FlowerForm** quality starts with data. Myrcene, for example, is linked to relaxation. To conduct your own research, we offer the raw data.\n\n**FREE EDUCATIONAL ASSET:** Download the **'Canna Grok Terpenome Map'** (CSV/JSON) with full chemical profiles.\n<a href="${GITHUB_RAW_CSV}" target="_blank">Download RAW Data for Free</a>`; 
        }

        // 2. **LEGALITY/STATE CHECK (PREMIUM: Compliance Navigator)**
        if (msg.includes('legal') || msg.includes('state') || msg.includes('law') || msg.includes('travel')) {
            if (userState.state) {
                // If state is already known, pitch the premium tool
                return `I confirmed your jurisdiction: **${userState.state}**.\n\nPossession limits are just the start. You need to understand **transportation, federal land, and crossing state lines** to stay safe. \n\nUnlock the **Canna Grok Compliance Navigator** (The Legal Matrix) for only $4.99/mo.\n<a href="${PREMIUM_SALES_PAGE}" target="_blank">Access the Legal Matrix Now</a>`;
            }
            userState.awaitingState = true;
            return `Legality is complex. For precise, current info (+21), please tell me **which US State you are in** (e.g., California, Texas)?`;
        }

        // 3. **PRODUCT/DOSAGE (PREMIUM: Doser PRO - The Scientific Protocol)**
        if (msg.includes('flowerform') || msg.includes('dose') || msg.includes('potency') || msg.includes('dosing')) {
            let strain = msg.includes('sleep') ? 'Granddaddy Purple' : 'FlowerForm Signature';
            return `**FlowerForm Research:** ${strain} is scientifically formulated. **Standard Starting Dose:** 5mg THC.\n\nTo move beyond the basic dose and get a personalized **Scientific Protocol** (based on your profile and terpene analysis), unlock the **'FlowerForm Doser PRO'** (Premium).\n<a href="${PREMIUM_SALES_PAGE}" target="_blank">Unlock the Scientific Protocol $4.99/mo</a>`;
        }

        // 4. **AFFILIATE PROMOTION (Educational CBD / Legal Substitute)**
        if (msg.includes('cbd') || msg.includes('anxiety') || msg.includes('substitute')) {
            return `CBD is a legal substitute in many areas, excellent for anxiety and wellness. **CannaGrok** partners with brands that prioritize quality and compliance.\n\n**Educational Recommendation:** We recommend looking into **Verified CBD Suppliers** for quality assurance.\n<a href="${AFFILIATE_HUB_LINK}" target="_blank">View Verified Alliances and Discounts</a>`;
        }

        // 5. **STATE ANSWER HANDLING (Follow-up to Legality Question)**
        if (userState.awaitingState) {
            userState.state = msg.toUpperCase().slice(0, 15); 
            userState.awaitingState = false;
            return `Thank you! I have cross-referenced data for **${userState.state}**.\n\nThis information is highly dynamic. To confirm detailed transport regulations and avoid risk, you need our full **Compliance Navigator** (Premium).\n<a href="${PREMIUM_SALES_PAGE}" target="_blank">Unlock Your Legal Safety $4.99/mo</a>`;
        }
        
        // 6. **DEFAULT MESSAGE**
        return `I am **Canna Grok**, your educational AI assistant. I provide data on **FlowerForm** dosing, legal compliance, and scientific profiles.\n\n*Try asking:* "What are the rules for my state?" or "What dose should I take?"`;
    }
        }

        // 2. **LEGALITY/STATE CHECK (PREMIUM: Compliance Navigator)**
        if (msg.includes('legal') || msg.includes('state') || msg.includes('law')) {
            if (userState.state) {
                return `Confirmed! For **${userState.state}**, possession is limited (typically 1oz max). \n\nDo you need the full **Travel & Transport Checklist** for **${userState.state}**? Unlock the **Canna Grok Compliance Navigator** (Premium). [Pay $4.99 here]`;
            }
            userState.awaitingState = true;
            return `Legality varies greatly. For precise, current info (+21), please tell me **which US State you are in** (e.g., California, Texas, etc.)?`;
        }

        // 3. **PRODUCT/DOSAGE (PREMIUM: Doser PRO)**
        if (msg.includes('flowerform') || msg.includes('dose') || msg.includes('potency')) {
            let strain = msg.includes('sleep') ? 'Granddaddy Purple' : 'FlowerForm Signature';
            return `**FlowerForm:** ${strain} is our top-rated product, guaranteed by **CannaGrok**.\n**Basic Suggested Dose:** Start with 5mg of THC.\n\nTo calculate your **exact, personalized dose** and optimal timing, unlock the **'FlowerForm Doser PRO'** (Premium). [Access for $4.99]`;
        }

        // 4. **AFFILIATE PROMOTION (CBD)**
        if (msg.includes('cbd') || msg.includes('anxiety')) {
            return `CBD is excellent for wellness. We recommend looking into **Charlotte's Web 20:1** oil (great for relaxation).\n\n[Get 20% OFF at CBDistillery here] (Your affiliate link)\n\nWant the best way to integrate CBD into your routine? Ask about our **Integration Guide (Premium)**.`;
        }

        // 5. **STATE ANSWER HANDLING**
        if (userState.awaitingState) {
            userState.state = msg.toUpperCase().slice(0, 15); 
            userState.awaitingState = false;
            return `Thank you! Got it, you are asking about **${userState.state}**.\n\nTo confirm detailed transport regulations and compliance, you need our full database (Premium). Do you want the **Canna Grok Compliance Navigator**? [Pay $4.99 here]`;
        }
        
        // 6. **DEFAULT MESSAGE**
        return `I am **Canna Grok**. I can help you with questions about **FlowerForm**, legality (+21), and dosing.\n\n*Try asking:* "What is the terpene Myrcene?" or "What dose of FlowerForm do you recommend?"`;
    }

    // --- INTERFACE LOGIC ---
    function send() {
      const text = input.value.trim();
      if (!text) return;
      addMsg(text, true); // User message
      input.value = '';
      
      // Simulate AI processing time for better UX
      addMsg('Canna Grok is processing...', false); 
      
      setTimeout(() => {
        messages.lastChild.remove(); // Remove "Processing..." message
        addMsg(grokResponse(text, userState), false); // Send advanced response
      }, 1000); // 1 second delay
    }

    input.addEventListener('keypress', e => { if (e.key === 'Enter') send(); });

    // Initial Welcome Message
    addMsg('Welcome to CANNAGROK! Ask about FlowerForm, dosage, or legality. üåø', false);
  </script>
</body>
</html>   implement V2 desing and advanced freemium logic   "Fix: Linked Terpenome Map to chat logic"
